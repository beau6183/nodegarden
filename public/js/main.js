"use strict";!function(){function t(){m=window.innerWidth*r,o=window.innerHeight*r,e=m*o,v.length=0|Math.sqrt(e/72),h.width=m,h.height=o;var t,a;for(t=0,a=v.length;a>t;t++)v[t]||(v[t]={x:Math.random()*m,y:Math.random()*o,vx:1*Math.random()-.5,vy:1*Math.random()-.5,m:10})}function a(){var t,e,r,h,i,x,M,d,l,s,w,c,g,f,p,P,u,I;for(requestAnimationFrame(a),y.clearRect(0,0,m,o),l=0,f=v.length-1;f>l;l++)for(s=l+1;f+1>s;s++)w=v[l],c=v[s],p=Math.pow(3*w.m/(4*Math.PI),1/3),P=Math.pow(3*c.m/(4*Math.PI),1/3),x=c.x-w.x,M=c.y-w.y,t=Math.sqrt(Math.pow(x,2)+Math.pow(M,2)),p+P>t?(w.m<=c.m&&(w.x=Math.random()*m,w.y=Math.random()*o,c.vx+=w.vx*(w.m/c.m),c.vy+=w.vy*(w.m/c.m),w.vx=1*Math.random()-.5,w.vy=1*Math.random()-.5,c.m+=w.m,console.log("Annihilation A->B",c.m),P=Math.pow(3*c.m/(4*Math.PI),1/3),w.m=10),c.m<=w.m&&(c.x=Math.random()*m,c.y=Math.random()*o,w.vx+=c.vx*(c.m/w.m),w.vy+=c.vy*(c.m/w.m),c.vx=1*Math.random()-.5,c.vy=1*Math.random()-.5,w.m+=c.m,p=Math.pow(3*w.m/(4*Math.PI),1/3),console.log("Annihilation B->A",w.m),c.m=10)):(d=5*p+5*P,t>d||(e={x:x/t,y:M/t},r=w.m*c.m/Math.pow(t,2),r>.025&&(r=.025),y.beginPath(),y.strokeStyle="rgba(0,0,255,"+40*r+")",y.moveTo(w.x,w.y),y.lineTo(c.x,c.y),y.stroke(),h=r*e.x,i=r*e.y,w.vx+=c.m/w.m*h,w.vy+=c.m/w.m*i,c.vx-=w.m/c.m*h,c.vy-=w.m/c.m*i));for(l=0,f=v.length;f>l;l++)g=v[l],y.beginPath(),y.fillStyle="rgba("+Math.min(255,g.m/10)+", 0, 0, 1)",y.arc(g.x,g.y,Math.pow(3*g.m/(4*Math.PI),1/3),0,2*Math.PI),y.fill(),g.x+=g.vx,g.y+=g.vy,g.x<=0?(u=n(g.vx,g.vy,!0),I=1-.5*u,g.x=0,g.vx*=-I,g.vy*=I,g.y+=g.vy):g.x>=m&&(u=n(g.vx,g.vy,!0),I=1-.5*u,g.x=m,g.vx*=-I,g.vy*=I,g.y+=g.vy),g.y<=0?(u=n(g.vx,g.vy,!1),I=1-.5*u,g.y=0,g.vy*=-I,g.vx*=I,g.x+=g.vx):g.y>=o&&(u=n(g.vx,g.vy,!1),I=1-.5*u,g.y=o,g.vy*=-I,g.vx*=I,g.x+=g.vx)}function n(t,a,n){var m=Math.abs(Math.atan(a/t))*(180/Math.PI);return n&&(m=90-m),m/90}var m,o,e,r=window.devicePixelRatio,v=new Array(Math.sqrt(e)/10|0),h=document.createElement("canvas"),y=h.getContext("2d"),i=document.getElementById("container");1!==r&&(h.style.transform="scale("+1/r+")",h.style.transformOrigin="0 0"),h.id="nodegarden",i.appendChild(h),t(),a(),window.addEventListener("resize",t)}();